<!DOCTYPE html>
<html>

<head>
    <title>Aerie :3</title>
    <link rel="icon" type="image/x-icon" href="transtrain.ico">
    <link rel="stylesheet" type="text/css" href="index.css">
</head>

<body>
    <div class="main_grid">
        <div class="right_sidebar">
            <div class="right_container" style="padding: 0 0 0 10px;">
                <h3>
                    <a href="#ExternalLinks">
                        <div class="navigation_button">link list</div>
                    </a>
                </h3>
                <h3>
                    <a href="#projects">
                        <div class="navigation_button">projects</div>
                    </a>
                </h3>
                <h3>
                    <a href="#blog-index"></a>
                    <div class="navigation_button">blog</div></a>
                </h3>
                <h3>
                    <a href="#recipes">
                        <div class="navigation_button">recipes</div>
                    </a>
                </h3>
            </div>
            <div class="right_container" style="flex: 1; overflow: hidden; height: calc(100% - 270px)">
                <div class="entry" style="padding: 0px;">
                    <center>
                        <h3>what's new?</h3>
                    </center>
                </div>
                <div id="rss_reader">
                </div>
            </div>
            <div class="right_container_border"></div>
        </div>
        <div class="middle_container">
            <div class="header">
                <header>
                    <div class="footer-content" style="background-color: brown;">
                        <div class="left-div">
                            <h1>
                                <a href="#home" class="mode_changer">
                                    <img class="mode_changer" src="transtrain.webp" alt="(insert train pic)"
                                        height="50" />
                                </a>
                                <a href="cat-space" class="secret">Cat</a> Space
                            </h1>
                        </div>
                        <div class="mode_changer" style="display: inline-block; width: 85px;">
                            <img id="toggle-button" src="moon.png" alt="Toggle Light Mode" width="75"
                                style="margin-left: -30px;">
                        </div>
                    </div>
                    <div class="mobile_navigation">
                        <a href="#ExternalLinks">
                            <div class="navigation_button">
                                <p class="navigation_button_p">link list</p>
                            </div>
                        </a>
                        <a href="#projects">
                            <div class="navigation_button">
                                <p class="navigation_button_p">projects</p>
                            </div>
                        </a>
                        <a href="#blog-index">
                            <div class="navigation_button">
                                <p class="navigation_button_p">blog</p>
                            </div>
                        </a>
                        <a href="#recipes">
                            <div class="navigation_button">
                                <p class="navigation_button_p">recipes</p>
                            </div>
                        </a>
                    </div>
                </header>
            </div>
            <div class="body">
                <iframe name="index"></iframe>
            </div>
            <div class="footer">
                <footer>
                    <hr>
                    <div class="footer-content">
                        <div class="left-div">
                            <!--<p>left</p>-->
                        </div>
                        <div class="center-div" style="max-height: 500px;">
                            <!--<h5>Part of the SadGirlsClub Webring</h5>-->
                            <h3>
                                <img src="88x31/ubuntu-88x31.gif" alt="Ubuntu User" />
                                <img src="88x31/transnow2.gif" alt="trans rights" />
                                <img src="88x31/rainbow.gif" alt="gay" />
                                <img src="88x31/gimp.gif" alt="gimp user" />
                                <img src="88x31/aeriecat.space.png" alt="aeriecat.space" title="Feel free to use">
                                <a href="index.xml" class="entry-link"><img
                                        src=https://wp-assets.rss.com/blog/wp-content/uploads/2019/10/10111557/social_style_3_rss-512-1.png
                                        height="31"></a>
                            </h3>
                        </div>
                        <div class="right-div">
                            <!--<p>right</p>-->
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <div class="left_sidebar">
        </div>
    </div>

    <script> //handles which html to load into the iframe based on url
        /* iframe code */
        window.addEventListener("hashchange", function () {
            var fileName = window.location.hash.substr(1);
            if (!fileName) {
                fileName = "home";
            }
            document.getElementsByName("index")[0].src = fileName;
        });
        if (!window.location.hash) {
            window.location.hash = "#home";
        } else {
            window.dispatchEvent(new Event("hashchange"));
        }
    </script>

    <script> //handles lightmode
        /* Light Mode toggle */
        function toggleMode() {
            var body = document.body;
            body.classList.toggle("light");
            var toggleButton = document.getElementById("toggle-button");
            var isLightMode = body.classList.contains("light");
            toggleButton.src = isLightMode ? "sun.png" : "moon.png";
            toggleButton.alt = isLightMode ? "Toggle Light Mode" : "Toggle Dark Mode";
            if (isLightMode) {
                body.style.backgroundImage = "url('backgrounds/background.jpg')"
            }
            if (!isLightMode) {
                body.style.backgroundImage = "url('backgrounds/background.png')"
            }
        }
        var toggleButton = document.getElementById("toggle-button");
        toggleButton.addEventListener("click", toggleMode);
    </script>

    <script>
        // Change background image on load
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(function () {
                console.log("it do it");
                var body = document.body;
                var currentBackground = getComputedStyle(body).backgroundImage;
                console.log(currentBackground)
                if (currentBackground.includes('background_small.jpg')) {
                    console.log('changing background dark')
                    body.style.backgroundImage = "url('backgrounds/background.png')";
                }
            }, 100);
        });
    </script>

    <script>
        const rssFeedDiv = document.getElementById('rss_reader');

        const rssFeedUrl = 'index.xml';

        fetch(rssFeedUrl)
            .then(response => response.text())
            .then(data => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(data, 'text/xml');
                const websiteName = xmlDoc.querySelector('channel > title').textContent;
                const items = xmlDoc.querySelectorAll('item');

                items.forEach(item => {
                    const title = item.querySelector('title').textContent;
                    const link = item.querySelector('link').textContent;
                    const description = item.querySelector('description').textContent;
                    const pubDate = new Date(item.querySelector('pubDate').textContent).toLocaleDateString();

                    const entryLink = document.createElement('a');
                    entryLink.href = link;
                    entryLink.classList.add('entry-link');
                    const entryDiv = document.createElement('div');
                    entryDiv.classList.add('entry');
                    const cornerText = document.createElement('div');
                    cornerText.classList.add('corner-text');
                    cornerText.textContent = websiteName + ' | ' + pubDate;
                    entryDiv.appendChild(cornerText);
                    entryDiv.innerHTML += `<h2>${title}</h2>`;

                    entryLink.appendChild(entryDiv);
                    rssFeedDiv.appendChild(entryLink);
                });
            })
            .catch(error => {
                console.error('Error fetching or parsing RSS feed:', error);
            });
    </script>
</body>

</html>