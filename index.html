<!DOCTYPE html>
<html>
    <head>
        <title>Aerie :3</title>
        <link rel="icon" type="image/x-icon" href="transtrain.ico">
        <link rel="stylesheet" type="text/css" href="index.css">
    </head>
    
    <body>
        <div class="main_grid">
            <div class="right_sidebar">
                <center><h3>what's new?</h3></center>
                <div id="rss_reader">

                </div>
            </div>
            <div class="middle_container">
                <div class="header">
                    <header>
                        <div class = "footer-content">
                            <div class="left-div">
                                <h1>
                                    <a href="#home">
                                        <img src = "transtrain.webp" alt = "(insert train pic)" height="50" />
                                    </a> 
                                    <a href="cat-space" class="secret">Cat</a> Space
                                </h1>
                            </div>
                            <div class="right-div" style="display: inline-block; width: 85px;">
                                <img id="toggle-button" src="moon.png" alt="Toggle Light Mode" width="75" style="margin-left: -30px;">
                            </div>
                        </div>
                    </header>
                </div>
                <div class="body">
                    <iframe name="index"></iframe>
                </div>
                <div class="footer">
                    <footer>
                        <hr>
                        <div class="footer-content">
                            <div class="left-div">
                                <!--<p>left</p>-->
                            </div>
                            <div class="center-div">
                                <!--<h5>Part of the SadGirlsClub Webring</h5>-->
                                <h3>
                                    <img src="88x31/ubuntu-88x31.gif" alt="Ubuntu User" />
                                    <img src="88x31/transnow2.gif" alt="trans rights" />
                                    <img src="88x31/rainbow.gif" alt="gay" />
                                    <img src="88x31/gimp.gif" alt="gimp user" />
                                    <img src="88x31/aeriecat.space.png" alt="aeriecat.space" title="Feel free to use">
                                </h3>
                                <h3>
                                    <span class="colored-box"> |
                                        <a href="#ExternalLinks">link list</a> |
                                        <a href="#projects">projects</a> |
                                        <a href="#blog-index">blog</a> |
                                        <a href="#recipes">recipes</a> |
                                        <a href="index.xml"><img src=https://wp-assets.rss.com/blog/wp-content/uploads/2019/10/10111557/social_style_3_rss-512-1.png height="18" style="position: relative; top: 5px;"></a>
                                    </span>
                                </h3>
                            </div>
                            <div class="right-div">
                                <!--<p>right</p>-->
                            </div>
                        </div>
                    </footer>
                </div>
            </div>
            <div class="left_sidebar">
                    <p>This is the left sidebar.</p>
                    <!-- You can add content to the sidebar here -->
            </div>
        </div>

        <script> //handles which html to load into the iframe based on url
            /* iframe code */
            window.addEventListener("hashchange", function() {
                var fileName = window.location.hash.substr(1);
                if (!fileName) {
                    fileName = "home";
                }
                document.getElementsByName("index")[0].src = fileName;
            });
            if (!window.location.hash) {
                window.location.hash = "#home";
            } else {
                window.dispatchEvent(new Event("hashchange"));
            }
        </script>

        <script> //handles lightmode
            /* Light Mode toggle */
            function toggleMode() {
                var body = document.body;
                body.classList.toggle("light");
                var toggleButton = document.getElementById("toggle-button");
                var isLightMode = body.classList.contains("light");
                toggleButton.src = isLightMode ? "sun.png" : "moon.png";
                toggleButton.alt = isLightMode ? "Toggle Light Mode" : "Toggle Dark Mode";
            }
            var toggleButton = document.getElementById("toggle-button");
            toggleButton.addEventListener("click", toggleMode);
        </script>
    
    <script>
        const rssFeedDiv = document.getElementById('rss_reader');

        const rssFeedUrl = 'index.xml';

        fetch(rssFeedUrl)
            .then(response => response.text())
            .then(data => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(data, 'text/xml');
                const websiteName = xmlDoc.querySelector('channel > title').textContent;
                const items = xmlDoc.querySelectorAll('item');

                items.forEach(item => {
                    const title = item.querySelector('title').textContent;
                    const link = item.querySelector('link').textContent;
                    const description = item.querySelector('description').textContent;
                    const pubDate = new Date(item.querySelector('pubDate').textContent).toLocaleDateString();

                    const entryLink = document.createElement('a');
                    entryLink.href = link;
                    entryLink.classList.add('entry-link');
                    const entryDiv = document.createElement('div');
                    entryDiv.classList.add('entry');
                    const cornerText = document.createElement('div');
                    cornerText.classList.add('corner-text');
                    cornerText.textContent = websiteName + ' | ' + pubDate;
                    entryDiv.appendChild(cornerText);
                    entryDiv.innerHTML += `<h2>${title}</h2>`;

                    entryLink.appendChild(entryDiv);
                    rssFeedDiv.appendChild(entryLink);
                });
            })
            .catch(error => {
                console.error('Error fetching or parsing RSS feed:', error);
            });
    </script>
</html>
